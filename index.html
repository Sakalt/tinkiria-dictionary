<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>辞書</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .word {
            font-weight: bold;
            cursor: pointer;
            color: blue;
            text-decoration: underline;
            margin-bottom: 5px;
        }
        .definition {
            display: none;
            margin-bottom: 10px;
        }
        .examples {
            margin-left: 20px;
            list-style-type: square;
        }
        .toggle-button {
            background-color: #00aa00;
            color: white;
            border: none;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin-top: 5px;
            cursor: pointer;
        }
        .details {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        .page-buttons {
            margin-top: 10px;
        }
        .page-buttons button {
            margin-right: 5px;
        }
    </style>
    <script>
        let dictionary = [];
        let currentPage = 1;
        const pageSize = 20; // 1ページに表示する単語の数

        async function fetchDictionary() {
            try {
                const response = await fetch('dictionary.json');
                if (!response.ok) {
                    throw new Error('ファイルの読み込みに失敗しました。');
                }
                dictionary = await response.json();
                displayDictionary();
            } catch (error) {
                console.error('fetchエラー:', error);
            }
        }

        function displayDictionary() {
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const wordsToShow = dictionary.slice(startIndex, endIndex);

            const dictionaryContainer = document.getElementById('dictionary');
            dictionaryContainer.innerHTML = '';

            wordsToShow.forEach(item => {
                const wordElement = document.createElement('div');
                wordElement.classList.add('word');
                wordElement.textContent = item.english;
                wordElement.onclick = () => toggleDetails(wordElement.nextSibling);

                const japaneseElement = document.createElement('div');
                japaneseElement.classList.add('details');
                japaneseElement.textContent = `日本語訳: ${item.japanese}`;

                const definitionElement = document.createElement('div');
                definitionElement.classList.add('definition');
                definitionElement.textContent = `意味: ${item.definition}`;

                const examplesElement = document.createElement('ul');
                examplesElement.classList.add('examples');
                examplesElement.innerHTML = item.examples.map(example => `<li>${example}</li>`).join('');

                const toggleButton = document.createElement('button');
                toggleButton.classList.add('toggle-button');
                toggleButton.textContent = '詳細を表示';
                toggleButton.onclick = () => toggleDetails(definitionElement, examplesElement, toggleButton, japaneseElement);

                dictionaryContainer.appendChild(wordElement);
                dictionaryContainer.appendChild(toggleButton);
                dictionaryContainer.appendChild(japaneseElement);
                dictionaryContainer.appendChild(definitionElement);
                dictionaryContainer.appendChild(examplesElement);

                const divider = document.createElement('hr');
                dictionaryContainer.appendChild(divider);
            });

            renderPageButtons();
        }

        function toggleDetails(definitionElement, examplesElement, toggleButton, japaneseElement) {
            if (definitionElement.style.display === 'none') {
                definitionElement.style.display = 'block';
                examplesElement.style.display = 'block';
                japaneseElement.style.display = 'block';
                toggleButton.textContent = '詳細を非表示';
            } else {
                definitionElement.style.display = 'none';
                examplesElement.style.display = 'none';
                japaneseElement.style.display = 'none';
                toggleButton.textContent = '詳細を表示';
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                displayDictionary();
            }
        }

        function nextPage() {
            const maxPage = Math.ceil(dictionary.length / pageSize);
            if (currentPage < maxPage) {
                currentPage++;
                displayDictionary();
            }
        }

        function renderPageButtons() {
            const maxPage = Math.ceil(dictionary.length / pageSize);
            const pageButtonsContainer = document.getElementById('pageButtons');
            pageButtonsContainer.innerHTML = '';

            if (currentPage > 1) {
                const previousButton = document.createElement('button');
                previousButton.textContent = '戻る';
                previousButton.onclick = previousPage;
                pageButtonsContainer.appendChild(previousButton);
            }

            if (currentPage < maxPage) {
                const nextButton = document.createElement('button');
                nextButton.textContent = '進む';
                nextButton.onclick = nextPage;
                pageButtonsContainer.appendChild(nextButton);
            }
        }

        window.onload = fetchDictionary;
    </script>
</head>
<body>
    <h1>辞書</h1>
    <div id="dictionary"></div>
    <div id="pageButtons" class="page-buttons"></div>
</body>
</html>
